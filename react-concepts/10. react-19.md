# Chapter: React 19 Features

---

## 1. What & Why

* **What it is**: React 19 is the next major version of React that introduces several new features & APIs. These include enhancements to server rendering, new hooks and built-in primitives, new form behavior, performance improvements, better integration of server/client boundaries, etc. ([React][1])
* **Why**: To simplify development, reduce boilerplate, improve performance (especially for server-rendered & hybrid apps), to improve UX (faster initial loads, better form handling, optimistic updates), to give more declarative tools for async/streaming rendering, and clearer separation of server vs client logic. ([React][1])

---

## 2. Main New Features & APIs

Here are the core features introduced in React 19 (with logic, use-cases, how they work, etc.):

| Feature                                                                  | What it does                                                                                                                                                                                                                                                                        | Logic / Key Details                                                                                                                                                                                                                     | Use-Cases                                                                                                                                                  |
| ------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **React Server Components**                                              | Allow parts of UI to be rendered on the server and sent to client without sending unnecessary JavaScript.                                                                                                                                                                           | Server Components run only on server (no client bundle), fetching data or doing heavy logic on server. Client components remain interactive. Directives like `'use server'` and `'use client'` mark boundaries. ([React][1])            | For sections of app that are mostly static or data-heavy (e.g. blog posts, product listings) to reduce client JS; improving initial load / SEO.            |
| **Actions & Form Actions**                                               | New way to declaratively handle form submissions and server side logic using `action` props.                                                                                                                                                                                        | Instead of writing `onSubmit` + fetch, you can pass a function to `<form action={fn}>`. React manages the submission, state, reset of uncontrolled form components by default. ([React][1])                                             | Simple forms where server fetching / mutations needed; reducing boilerplate for form handling.                                                             |
| **New Hooks** ‒ **useOptimistic**, **useActionState**, **useFormStatus** | ‒ `useOptimistic`: for optimistic UI updates (instant UI, then confirmation or rollback) <br> ‒ `useActionState`: track pending / error / result state of Actions <br> ‒ `useFormStatus`: for child components to see status of containing form without prop drilling. ([React][1]) | When using forms / server actions; want to show loading state, disabled buttons, optimistic feedback, error messages.                                                                                                                   |                                                                                                                                                            |
| **New `use()` API**                                                      | Allows reading promises or context directly in render, with built-in Suspense support. Suspends until promise resolves.                                                                                                                                                             | You can call `use(somePromise)` or `use(someContext)`. Important note: promises **must not** be created inside render (unless supported by framework); the promise should come from outside / Suspense-compatible library. ([React][1]) | Simplifies async data loading (e.g. fetching data before render), combining with Suspense; less need for manual `useEffect + state + loading` boilerplate. |
| **Ref as a Prop (without forwardRef)**                                   | You can now pass `ref` directly as a prop to a functional component rather than using `forwardRef`.                                                                                                                                                                                 | React automatically supports this. Helps reduce wrapper boilerplate. Note: existing `forwardRef` still supported. ([React][1])                                                                                                          | When building input / UI components that accept ref for focusing or measuring DOM, custom elements; makes wrappers simpler.                                |
| **Context as a Provider shorthand**                                      | Instead of `<MyContext.Provider value={...}>`, can use `<MyContext value={...}>` directly.                                                                                                                                                                                          | Syntax sugar; reduces verbosity. ([vairix.com][2])                                                                                                                                                                                      | Cleaner code when using many contexts, easier to read.                                                                                                     |
| **Document Metadata Support**                                            | React 19 supports tags like `<title>`, `<meta>`, `<link>` inside components, with React ensuring proper hoisting to document head.                                                                                                                                                  | Built-in metadata management rather than relying on external libraries (like React Helmet). Works with Server Components as well. ([vairix.com][2])                                                                                     | SEO friendly apps; dynamic titles, social meta tags; pages where metadata depends on route or data.                                                        |
| **Improved Hydration Error Reporting**                                   | Better messages & diagnostics when hydration mismatches between server and client.                                                                                                                                                                                                  | React identifies mismatches more clearly, consolidates error messages, helps debugging. ([Kellton][3])                                                                                                                                  | Useful for SSR / hybrid apps where hydration mismatches cause tricky bugs.                                                                                 |
| **Support for Custom Elements / Web Components**                         | Better integration of custom HTML elements / Web Components; props mapping, lifecycle synergy.                                                                                                                                                                                      | React 19 aligns better with Web Components spec; they work more naturally with SSR / Client. ([React][1])                                                                                                                               | If you use Web Components or want parts of UI done outside React, or integrating component libraries built as custom elements.                             |
| **Resource Preloading / Asset Scripts / Stylesheet Improvements**        | Better control over preload, prefetch, and async scripts/styles; ability to manage resource loading declaratively.                                                                                                                                                                  | You can declaratively request resource preloading etc., improving perceived performance. Also improvements in how scripts/styles are handled. ([Radixweb][4])                                                                           | Faster page loads; avoid “flash of unstyled content”; improve performance especially on slow networks.                                                     |

---

## 3. Breaking Changes / Things to Watch Out For

* Removal / deprecation of some uses of `forwardRef` in favor of passing `ref` as prop. If you have many components using `forwardRef`, may need refactor. ([React][1])
* Some APIs are still experimental or are strict about how they are used (e.g. `use()` cannot take promises created in render). ([React][1])
* Library compatibility: many third-party libraries need to catch up or test with React 19. Custom elements, context shorthand, etc. ([Reddit][5])

---

## 4. Example Code Snippets

Here are small code examples to illustrate a few of React 19 features.

### Example: Form Action + `useActionState`

```jsx
// Suppose you have a server side async function
"use server";
async function submitUser(formData) {
  // process form data, maybe save to DB
  return { success: true };
}

// On client
import { useActionState } from "react";

function ProfileForm() {
  const [error, handleSubmitAction, isPending] = useActionState(submitUser, null);

  return (
    <form action={handleSubmitAction}>
      <input name="username" />
      <button type="submit" disabled={isPending}>
        {isPending ? "Saving..." : "Save"}
      </button>
      {error && <p className="text-red-500">{error}</p>}
    </form>
  );
}
```

### Example: `use()` in Render

```jsx
import { use } from "react";
import React, { Suspense } from "react";

function Comments({ commentsPromise }) {
  const comments = use(commentsPromise);
  return (
    <ul>
      {comments.map(c => <li key={c.id}>{c.text}</li>)}
    </ul>
  );
}

function Page() {
  const commentsPromise = fetch("/api/comments").then(r => r.json());

  return (
    <Suspense fallback={<div>Loading comments...</div>}>
      <Comments commentsPromise={commentsPromise} />
    </Suspense>
  );
}
```

### Example: `ref` as Prop

```jsx
function MyInput({ placeholder, ref }) {
  return <input placeholder={placeholder} ref={ref} />;
}

function Parent() {
  const myRef = React.useRef();
  return <MyInput ref={myRef} placeholder="Type here" />;
}
```

---

## 5. File Naming / Structure Suggestions When Using React 19

When using React 19, you might structure code like:

```
src/
 ├── components/
 │    ├── ProfileFormAction.jsx
 │    ├── CommentList.jsx
 │    └── CustomInput.jsx
 ├── server/
 │    └── actions/  // for server‐side functions e.g. submitUser
 ├── contexts/
 │    └── ThemeContext.jsx
 └── App.jsx
```

* Separate server only logic/actions from client components
* Use `.server.jsx` or `.client.jsx` naming if framework supports server/client boundaries
* Use context shorthand where needed `<MyContext>` instead of `<MyContext.Provider>`

---

## 6. Summary Notes

* React 19 is not just incremental; it brings significant new APIs and shifts.
* Features like Form Actions, optimistic UI, `use()`, `ref` as props, built-in metadata, server/client directive changes are geared toward cleaner, more declarative code.
* New hooks like `useOptimistic`, `useActionState`, `useFormStatus` help with forms and server mutations.
* Must pay attention to compatibility, correct usage of async APIs, and staying within allowed constraints.

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JavaScript Random Demo</title>
  <style>
    /* Styling for the random demo */
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 20px auto;
      padding: 10px;
      color: white;
      background-color: rgb(22, 22, 22);
    }
    input, button, select {
      padding: 8px;
      margin: 5px;
      border: none;
      border-radius: 4px;
    }
    button {
      background-color: #007bff;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #0056b3;
    }
    #output {
      margin-top: 20px;
      padding: 10px;
      border: 1px solid #444;
      border-radius: 4px;
      background-color: #333;
    }
    .highlight {
      background-color: #444;
      padding: 2px 5px;
      border-radius: 3px;
    }
    .error {
      color: #ff4444;
      font-style: italic;
    }
    #action-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      margin-top: 10px;
    }
    label {
      margin-right: 10px;
    }
    form {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    #random-color-box {
      width: 100px;
      height: 100px;
      margin: 10px 0;
      border: 1px solid #fff;
    }
    #chart-container {
      margin-top: 20px;
      background-color: #333;
      padding: 10px;
      border-radius: 4px;
    }
  </style>
  <!-- Include Chart.js for frequency visualization -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <h1>JavaScript Random Demo</h1>
  <p>Explore Math.random() and generate random integers, colors, dice rolls, and list items.</p>
  <form id="random-form">
    <label for="min-input">Min:</label>
    <input type="number" id="min-input" placeholder="e.g., 1">
    <label for="max-input">Max:</label>
    <input type="number" id="max-input" placeholder="e.g., 10">
    <select id="range-type">
      <option value="inclusive">Inclusive</option>
      <option value="exclusive">Exclusive</option>
    </select>
    <button type="submit">Generate Random Integer</button>
  </form>
  <form id="list-form">
    <label for="list-input">Enter List (comma-separated):</label>
    <input type="text" id="list-input" placeholder="e.g., Apple, Banana, Orange">
    <button type="submit">Pick Random Item</button>
  </form>
  <div id="action-buttons">
    <button id="random-number">Generate Random (0-1)</button>
    <button id="roll-dice">Roll Dice (1-6)</button>
    <button id="random-color">Random Color</button>
    <button id="generate-frequencies">Generate Frequencies</button>
  </div>
  <div id="random-color-box"></div>
  <div id="output"></div>
  <div id="chart-container">
    <canvas id="frequency-chart"></canvas>
  </div>

  <script>
    /*
     * JavaScript Random Demo
     * 
     * This project demonstrates JavaScript Math.random() and random integer generation:
     * 1. Random Numbers: Math.random() (0 inclusive, 1 exclusive)
     * 2. Random Integers: Using Math.floor() with scaling for ranges
     * 3. Range Options: Inclusive and exclusive ranges with getRndInteger
     * 4. Practical Applications: Dice rolling, random colors, random list items
     * 5. Visualization: Display frequency of random integers with Chart.js
     * 6. Event Handling: Form submission, button clicks, keydown
     * 
     * Functionality:
     * - Generate random numbers and integers in specified ranges
     * - Roll a die (1-6)
     * - Generate a random RGB color
     * - Pick a random item from a user-input list
     * - Visualize frequency of random integers
     * - Log interactions to console for learning
     * - Handle errors for invalid inputs
     */

    // Get DOM elements
    const randomForm = document.getElementById("random-form");
    const minInput = document.getElementById("min-input");
    const maxInput = document.getElementById("max-input");
    const rangeType = document.getElementById("range-type");
    const listForm = document.getElementById("list-form");
    const listInput = document.getElementById("list-input");
    const output = document.getElementById("output");
    const randomNumberBtn = document.getElementById("random-number");
    const rollDiceBtn = document.getElementById("roll-dice");
    const randomColorBtn = document.getElementById("random-color");
    const generateFrequenciesBtn = document.getElementById("generate-frequencies");
    const colorBox = document.getElementById("random-color-box");
    const chartCanvas = document.getElementById("frequency-chart");
    const ctx = chartCanvas.getContext("2d");

    let interactionId = 0; // Counter for interaction tracking
    let frequencyData = []; // Store frequency counts for chart
    let chartInstance = null; // Chart.js instance

    // Initialize Chart.js
    function initializeChart(labels = [], data = []) {
      if (chartInstance) chartInstance.destroy();
      chartInstance = new Chart(ctx, {
        type: "bar",
        data: {
          labels: labels,
          datasets: [{
            label: "Frequency of Random Integers",
            data: data,
            backgroundColor: "rgba(75, 192, 192, 0.8)",
            borderColor: "rgba(75, 192, 192, 1)",
            borderWidth: 1
          }]
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
              title: { display: true, text: "Frequency" }
            },
            x: {
              title: { display: true, text: "Integer" }
            }
          }
        }
      });
    }

    // =============================================
    // 1. WINDOW LOAD EVENT
    // =============================================
    window.addEventListener("load", () => {
      console.log("Window loaded - JavaScript Random Demo ready!");
      initializeChart();
      displayOutput("Welcome to the Random Demo!");
    });

    // =============================================
    // 2. DISPLAY OUTPUT FUNCTION
    // =============================================
    /*
     * Displays the result of random operations.
     * Uses template literals for formatted output.
     */
    function displayOutput(message, content = "") {
      const outputHTML = `
        <h3>${message}</h3>
        ${content}
      `;
      output.innerHTML = outputHTML;
    }

    // =============================================
    // 3. RANDOM FORM SUBMIT EVENT (GENERATE RANDOM INTEGER)
    // =============================================
    randomForm.addEventListener("submit", (event) => {
      event.preventDefault();
      const min = parseInt(minInput.value);
      const max = parseInt(maxInput.value);
      const isInclusive = rangeType.value === "inclusive";
      interactionId++;

      if (isNaN(min) || isNaN(max)) {
        output.innerHTML = '<p class="error">Please enter valid min and max values!</p>';
        console.log("Random form submit failed - Invalid input");
        return;
      }
      if (min > max) {
        output.innerHTML = '<p class="error">Min cannot be greater than max!</p>';
        console.log("Random form submit failed - Min > Max");
        return;
      }

      const randomInt = isInclusive ? getRndIntegerInclusive(min, max) : getRndIntegerExclusive(min, max);
      displayOutput(`Random Integer (${min} to ${max}, ${isInclusive ? "inclusive" : "exclusive"}):`, `
        <p>Result: <span class="highlight">${randomInt}</span></p>
      `);
      console.log(`Generated random integer: ${randomInt} (${min}-${max}, ${isInclusive ? "inclusive" : "exclusive"}) (Interaction #${interactionId})`);
      minInput.value = "";
      maxInput.value = "";
    });

    // Random integer functions
    function getRndIntegerInclusive(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    function getRndIntegerExclusive(min, max) {
      return Math.floor(Math.random() * (max - min)) + min;
    }

    // =============================================
    // 4. LIST FORM SUBMIT EVENT (PICK RANDOM ITEM)
    // =============================================
    listForm.addEventListener("submit", (event) => {
      event.preventDefault();
      const listStr = listInput.value.trim();
      interactionId++;

      if (!listStr) {
        output.innerHTML = '<p class="error">Please enter a list!</p>';
        console.log("List form submit failed - Empty input");
        return;
      }

      const items = listStr.split(",").map(item => item.trim()).filter(item => item);
      if (items.length === 0) {
        output.innerHTML = '<p class="error">List cannot be empty!</p>';
        console.log("List form submit failed - No valid items");
        return;
      }

      const randomIndex = getRndIntegerInclusive(0, items.length - 1);
      const randomItem = items[randomIndex];
      displayOutput("Random Item from List:", `
        <p>List: <span class="highlight">${items.join(", ")}</span></p>
        <p>Result: <span class="highlight">${randomItem}</span></p>
      `);
      console.log(`Picked random item: ${randomItem} from ${items} (Interaction #${interactionId})`);
      listInput.value = "";
    });

    // =============================================
    // 5. GENERATE RANDOM NUMBER (0-1)
    // =============================================
    randomNumberBtn.addEventListener("click", () => {
      interactionId++;
      const randomNum = Math.random();
      displayOutput("Random Number (0 to 1, exclusive):", `
        <p>Result: <span class="highlight">${randomNum.toFixed(6)}</span></p>
      `);
      console.log(`Generated random number: ${randomNum} (Interaction #${interactionId})`);
    });

    // =============================================
    // 6. ROLL DICE (1-6)
    // =============================================
    rollDiceBtn.addEventListener("click", () => {
      interactionId++;
      const diceRoll = getRndIntegerInclusive(1, 6);
      displayOutput("Dice Roll (1-6):", `
        <p>Result: <span class="highlight">${diceRoll}</span></p>
      `);
      console.log(`Rolled dice: ${diceRoll} (Interaction #${interactionId})`);
    });

    // =============================================
    // 7. RANDOM COLOR
    // =============================================
    randomColorBtn.addEventListener("click", () => {
      interactionId++;
      const r = getRndIntegerInclusive(0, 255);
      const g = getRndIntegerInclusive(0, 255);
      const b = getRndIntegerInclusive(0, 255);
      const color = `rgb(${r}, ${g}, ${b})`;
      colorBox.style.backgroundColor = color;
      displayOutput("Random Color:", `
        <p>RGB: <span class="highlight">${color}</span></p>
      `);
      console.log(`Set random color: ${color} (Interaction #${interactionId})`);
    });

    // =============================================
    // 8. GENERATE FREQUENCIES
    // =============================================
    generateFrequenciesBtn.addEventListener("click", () => {
      interactionId++;
      const min = 1;
      const max = 10;
      const trials = 100;
      frequencyData = new Array(max - min + 1).fill(0);

      for (let i = 0; i < trials; i++) {
        const num = getRndIntegerInclusive(min, max);
        frequencyData[num - min]++;
      }

      const labels = Array.from({ length: max - min + 1 }, (_, i) => (min + i).toString());
      initializeChart(labels, frequencyData);
      displayOutput(`Frequency of Random Integers (1-10, ${trials} trials):`, `
        <p>See chart below for results.</p>
      `);
      console.log(`Generated frequencies: ${frequencyData} (Interaction #${interactionId})`);
    });

    // =============================================
    // 9. KEYDOWN EVENT ON INPUT
    // =============================================
    minInput.addEventListener("keydown", (event) => {
      const keyPressed = event.key;
      console.log(`Keydown - Key pressed: ${keyPressed}`);
      if (keyPressed === "Enter") {
        console.log("Enter key detected - Random form may submit");
      }
    });

  </script>
</body>
</html>